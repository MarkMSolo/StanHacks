(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{110:function(e,t,n){e.exports=n(111)},111:function(e,t,n){"use strict";n.r(t);var a=n(103),r=n(104),c=n(108),i=n(105),o=n(109),s=n(52),u=n(9),f=n.n(u),l=n(106),d=n.n(l),v=n(10),m=(n(203),n(107)),h=n.n(m)()("https://socket-server-example.herokuapp.com/"),p=function(e){return{detect:function(t){var n=v.h(function(){return v.a.fromPixels(t).expandDims(0)}),a=n.shape[1],r=n.shape[2];return e.executeAsync(n).then(function(e){var t=e[0].dataSync(),c=e[1].dataSync();n.dispose(),v.b(e);var i=function(e,t,n){for(var a=[],r=[],c=0;c<t;c++){for(var i=Number.MIN_VALUE,o=-1,s=0;s<n;s++)e[c*n+s]>i&&(i=e[c*n+s],o=s);a[c]=i,r[c]=o}return[a,r]}(t,e[0].shape[1],e[0].shape[2]),o=Object(s.a)(i,2),u=o[0],f=o[1],l=v.c();v.f("cpu");var d=v.h(function(){var t=v.g(c,[e[1].shape[1],e[1].shape[3]]);return v.d.nonMaxSuppression(t,u,20,.5,.5)}),m=d.dataSync();return d.dispose(),v.f(l),function(e,t,n,a,r,c){for(var i=r.length,o=[],s=0;s<i;s++){for(var u=[],f=0;f<4;f++)u[f]=n[4*r[s]+f];var l=u[0]*t,d=u[1]*e,v=u[2]*t,m=u[3]*e;u[0]=d,u[1]=l,u[2]=m-d,u[3]=v-l,o.push({bbox:u,class:c[r[s]],score:a[r[s]]})}return o}(r,a,c,u,m,f)})}}};h.on("message",function(e){document.getElementById("global").innerHTML=e.msg});var b=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(n=Object(c.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(o)))).videoRef=f.a.createRef(),n.canvasRef=f.a.createRef(),n.detectFrame=function(e,t,a){p(t).detect(e).then(function(r){n.renderPredictions(r,a),requestAnimationFrame(function(){n.detectFrame(e,t,a)})})},n.renderPredictions=function(e,t){var a=n.canvasRef.current.getContext("2d");a.clearRect(0,0,a.canvas.width,a.canvas.height);var r="16px sans-serif";a.font=r,a.textBaseline="top",e.forEach(function(e){var n=e.bbox[0],c=e.bbox[1],i=e.bbox[2],o=e.bbox[3],s=t[parseInt(e.class)];a.strokeStyle="#00FFFF",a.lineWidth=4,a.strokeRect(n,c,i,o),a.fillStyle="#00FFFF";var u=a.measureText(s).width,f=parseInt(r,10);a.fillRect(n,c,u+4,f+4)}),e.forEach(function(e){var n=e.bbox[0],r=e.bbox[1],c=t[parseInt(e.class)];a.fillStyle="#000000",a.fillText(c,n,r),h.emit("message","Suspicious activity detected")})},n}return Object(o.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){var t=navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"user"}}).then(function(t){return window.stream=t,e.videoRef.current.srcObject=t,new Promise(function(t,n){e.videoRef.current.onloadedmetadata=function(){t()}})}),n=v.e("/StanHacks/model_web/model.json"),a=fetch("/StanHacks/model_web/labels.json").then(function(e){return e.json()});Promise.all([n,a,t]).then(function(t){var n=Object(s.a)(t,2),a=n[0],r=n[1];e.detectFrame(e.videoRef.current,a,r)}).catch(function(e){console.error(e)})}}},{key:"render",value:function(){return f.a.createElement("div",{className:"video"},f.a.createElement("video",{className:"size",autoPlay:!0,playsInline:!0,muted:!0,ref:this.videoRef,width:"600",height:"500"}),f.a.createElement("canvas",{className:"size",ref:this.canvasRef,width:"600",height:"500"}),f.a.createElement("a",{className:"btn",onClick:function(){h.emit("message","Premise is safe")}},"Clear"),f.a.createElement("div",null,f.a.createElement("h3",{id:"global"},"Premise is safe")))}}]),t}(f.a.Component),g=document.getElementById("root");d.a.render(f.a.createElement(b,null),g)},119:function(e,t){},121:function(e,t){},154:function(e,t){},155:function(e,t){},200:function(e,t){},201:function(e,t){},202:function(e,t){},203:function(e,t,n){},228:function(e,t){}},[[110,2,1]]]);
//# sourceMappingURL=main.79b03d4e.chunk.js.map